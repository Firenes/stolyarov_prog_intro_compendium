Права доступа к файлам

-rw-r--r--  1 nikitashumilin  staff      42  7 ноя 13:31 file_permission.txt

С каждым файлов в UNIX связано 12-битное слово –– "права доступа" к файлу.

Младшие 9 бит объединены в 3 группы по 3 бита:
- Права доступа для владельца файла
- Права доступа для владельца группы
- Права доступа для всех остальных пользователей

3 бита в каждой группе отвечают за право:
- Чтения файла
- Записи в файл
- Исполнения файла


Символ в начале "-rw-r--r--" показывает тип файла
"-" –– обычный файл
"d" –– директория

"rw-" –– доступ для владельца только чтение и запись
"r--" –– доступ для владельца группы только чтение
"r--" –– доступ для всех остальных –– только чтение


Права к доступу файла обычно записываются в виде трёхзначного восьмиричного числа.
Младший разряд –– права для всех пользователей
Средний разряд –– права для группы
Старший разряд –– права для влдельца

Биты:
Младший бит –– права на исполнение (значение 1)
Средний бит –– права на запись (значение 2)
Старший бит –– права на чтение (значение 4)

Эти значение суммируются. К примеру, чтобы задать права на чтение и запись,
нужно задачить число 6 (4 + 2). Чтение и исполнение –– 5 (4 + 1)

Права из примера выше можно закодировать таким восьмиричным числом: 0644

Для изменения прав доступа используется команда chmod (change mode)

chmod 644 file_permission.txt


Права доступа также можно задать в виде мнемонической строки вида:
[ugoa][+-=][rwxsXtugo]

u –– user
g –– group
o –– others
a –– all (для всех сразу)

"+" –– добавление новых прав
"-" –– снятие старых прав
"=" –– установка указанных прав и снятие старых

r –– read
w –– write
x –– execute (?)
s –– установка/снятие Set-битов (имеет смысл для владельца и группы)

t –– Sticky Bit
u,g,o –– user, group, other

X –– установка/снятие бита исполнения только для каталогов, а также тех файлов,
	 на которых хотя бы у кого-нибудь есть права исполнения


Если команду chmod использовать с флажком -R, она сменит права доступа ко всем файлам
во всех поддиректориях заданной директории.

Если зафаршмачил с правами доступа в текущей директории + поддиректориях,
то полезна эта команда

chmod -R u+rwX,go=rX

Для всех файлов права владельцев ставит на чтение и на запись.
Для директорий, а также для файлов, для которых исполнение разрешено хоть кому-то,
владельцу назначаются также права на исполнение.
Для группы и остальных пользователей устанавливаются права на чтение,
для исполняемых файлов и директорий –– также права на исполнение,
а все остальные права убираются.
