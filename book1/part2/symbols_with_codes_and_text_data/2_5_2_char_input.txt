Посимвольный ввод


При вводе некорректных значений, к примеру, метода read(),метод может вернуть ошибку:
Runtime error 106 at $080480C4

Число 106 и есть возвращаемое значение у метода, по которому можно определить какого рода ошибка, но где конкретно.

Для обработки ошибок можно использовать такую конструкцию:

{$I-}

"I" – input;
"-" – отключение встроенных диагностических ошибок для пользовательского ввода.

Для выяснения какой именно код нам достался,
используется встроенная функция IOResult.

IOResult возвращает 0, если операция прошла успешно. Всё остальное – ошибки.


Для детального анализа пользовательского ввода, необходимо отказаться от метода read().
Вместо него надо читать пользовательский ввод посимвольно.

Для решения такой задачи, можно взять процедуру с двумя параметрами-переменными: boolean и longint.

boolean – успешный/неуспешный ввод;
longint – введёное число при успешном вводе.

Оператор read() будет принимать char, из которого будет формироваться число.
Формирование будет происходить за счёт ord(c) - ord('0').
К примеру, ord('3') - ord('0') = 51 - 48 = 3.
Если число имеет несколько порядков, то собираемая сумма будет умножаться на 10 + текущее введённое число.

См. char2num.pas
